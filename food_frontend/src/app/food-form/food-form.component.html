<mat-toolbar>
  <span>Food Diary</span>
</mat-toolbar>

<mat-card>
  <div id="time-selector">
    <div>
      <mat-form-field [floatLabel]="'always'">
        <mat-label>year</mat-label>
        <mat-select [placeholder]="getCurrentYear()" [(ngModel)]="year" (selectionChange)="onYearChange($event)">
          <mat-option *ngFor="let year of years" [value]="year">
            {{year}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field [floatLabel]="'always'">
        <mat-label>month</mat-label>
        <mat-select [placeholder]="getCurrentMonth()" [(ngModel)]="month" (selectionChange)="onMonthChange($event)">
          <mat-option *ngFor="let month of months" [value]="month.value">
            {{month.viewValue}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field [floatLabel]="'always'">
        <mat-label>day</mat-label>
          <mat-select [placeholder]="getCurrentDay()" [(ngModel)]="day">
            <mat-option *ngFor="let day of days" [value]="day">
              {{day}}
            </mat-option>
          </mat-select>
      </mat-form-field>

      <mat-radio-group [(ngModel)]="meal">
        <mat-radio-button *ngFor="let meal of meals" [value]="meal">
          {{meal}}
        </mat-radio-button>
      </mat-radio-group>

      <button mat-raised-button class="addFoodBtn" (click)="addFood()">+ food</button>
    </div>

  </div>

  <div>
    <div id="food-selector" *ngIf="displayAdd()">
      <h3>Food</h3>

      <mat-radio-group [(ngModel)]="foodGroup">
        <mat-radio-button *ngFor="let foodGroup of foodGroups" [value]="foodGroup">
          {{foodGroup}}
        </mat-radio-button>
      </mat-radio-group>

      <input matInput placeholder="food" [(ngModel)]="food">

      <input matInput placeholder=1 [(ngModel)]="quantity">

      <button mat-raised-button (click)="record()" [disabled]="!fieldsFilled()">
          record
      </button>
    </div>
  </div>

  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        food history
      </mat-panel-title>
    </mat-expansion-panel-header>

    <div *ngFor="let day of dayRecords">
      <p>
        <span>
            {{day.date | date}} : {{day.totalCalories}}
        </span>
        <button mat-button (click)="deleteOne(day.date)"><mat-icon svgIcon="garbage">garbage</mat-icon></button>
      </p>
      <span *ngFor="let meal of day.meals" class="inlineblock">
        <div>{{meal.name}}</div>
        <table mat-table [dataSource]="meal.foods">
          <ng-container matColumnDef="value">
            <th mat-header-cell *matHeaderCellDef>Food</th>
            <td mat-cell *matCellDef="let food">{{food.value}}</td>
          </ng-container>
          <ng-container matColumnDef="foodGroup">
            <th mat-header-cell *matHeaderCellDef>Food Group</th>
            <td mat-cell *matCellDef="let food">{{food.foodGroup}}</td>
          </ng-container>
          <ng-container matColumnDef="calories">
            <th mat-header-cell *matHeaderCellDef>Calories</th>
            <td mat-cell *matCellDef="let food">{{food.calories}}</td>
          </ng-container>
          <ng-container matColumnDef="quantity">
            <th mat-header-cell *matHeaderCellDef>Quantity</th>
            <td mat-cell *matCellDef="let food">{{food.quantity}}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="foodColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: foodColumns;"></tr>
        </table>
      </span>
    </div>

  </mat-expansion-panel>

  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        creds
      </mat-panel-title>
    </mat-expansion-panel-header>
      <span>Icons made by <a href="https://www.flaticon.com/authors/smashicons" title="Smashicons">Smashicons</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></span>
      <div>Icons made by <a href="https://www.flaticon.com/authors/gregor-cresnar" title="Gregor Cresnar">Gregor Cresnar</a> from <a href="https://www.flaticon.com/" 		    title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" 		    title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>
  </mat-expansion-panel>

</mat-card>
